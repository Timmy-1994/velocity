"use strict";var GradientCanvas=function(t){var e,n,i,a=t.minIntensity||0,o=t.maxIntensity||10,r=(t.opacity,t.reverseX||!1),s=t.reverseY||!1,h=t.dpx||2,l=["rgba(  0,  0,  0, 0.0)","rgba( 36,104,180, 0.8)","rgba( 60,157,194, 0.8)","rgba(128,205,193, 0.8)","rgba(151,218,168, 0.8)","rgba(198,231,181, 0.8)","rgba(238,247,217, 0.8)","rgba(255,238,159, 0.8)","rgba(252,217,125, 0.8)","rgba(255,182,100, 0.8)","rgba(252,150, 75, 0.8)","rgba(250,112, 52, 0.8)","rgba(245, 64, 32, 0.8)","rgba(237, 45, 28, 0.8)","rgba(220, 24, 32, 0.8)","rgba(180,  0, 35, 0.8)"],c=t.colorScale||l,u=x;"string"==typeof t.interpolateType&&(u="nearestneighbor"==t.interpolateType.toLowerCase()?function(t,e,n){if(!n)return null;var i=C(t-d,360)/_,a=(p-e)/m,o=Math.round(i),r=Math.round(a),s=n[r];if(s){var h=s[o];if(M(h))return h}return null}:x),"function"==typeof t.interpolateType&&(u=t.interpolateType);var d,p,_,m,y,f,v=t.data,g=function(t,e,n,i,a,o){var r=1-t,s=1-e;return n*(r*s)+i*(t*s)+a*(r*e)+o*(t*e)},w=function(t,e){var a=(n=function(t){t.dx||(t.dx=(t.lo2-t.lo1)/(t.nx-1)),t.dy||(t.dy=(t.la1-t.la2)/(t.ny-1));t.nx,t.ny;return{header:t,data:function(e){return t.d.v[e]}}}(t)).header;d=a.lo1,p=a.la1,_=a.dx,m=a.dy,y=a.nx,f=a.ny,i=[];for(var o=0,h=Math.floor(y*_)>=360,l=0;l<f;l++){for(var c=[],u=0;u<y;u++,o++)r?c.unshift(n.data(o)):c.push(n.data(o));h&&(r?c.unshift(c[c.length-1]):c.push(c[0])),s?i.unshift(c):i.push(c)}e(i)};function x(t,e,n){if(!n)return null;var i,a=C(t-d,360)/_,o=(p-e)/m,r=Math.floor(a),s=r+1,h=Math.floor(o),l=h+1;if(i=n[h]){var c=i[r],u=i[s];if(M(c)&&M(u)&&(i=n[l])){var y=i[r],f=i[s];if(M(y)&&M(f))return g(a-r,o-h,c,u,y,f)}}return null}var M=function(t){return null!=t&&"number"==typeof t},C=function(t,e){return t-e*Math.floor(t/e)},P=function(t){return t/180*Math.PI},b=function(e,n){var i=t.map.containerPointToLatLng(L.point(e,n));return[i.lng,i.lat]},O=function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),i=n.createLinearGradient(0,0,0,256);e.width=1,e.height=256;var a=t.length;for(var o in t)i.addColorStop(o/a,t[o]);return n.fillStyle=i,n.fillRect(0,0,1,256),n.getImageData(0,0,1,256).data};e=O(c);var D=function(t,e,n){function i(e,n){var i=t[Math.round(e)];return i&&i[Math.round(n)]||null}i.release=function(){t=[]},n(e,i,t)},T=function(){S.field&&S.field.release()},S={params:t,start:function(n,r,s,l,c){P(l[0][1]),P(l[1][1]),P(l[1][0]),P(l[0][0]);T();var d=function(){console.time("[gradient]interpolateField"),function(t,e,n,a){var o=[],r=e.x;function s(n){e.width,e.height;for(var a=[],r=e.y;r<=e.yMax;r+=h){var s=b(n,r);if(s){var l=s[0],c=s[1];if(isFinite(l))for(var u=t(l,c,i),d=0;d<h;d++)a[r+d]=u}}for(d=0;d<h;d++)o[n+d]=a}!function t(){for(var n=Date.now();r<e.width;)if(s(r),r+=h,Date.now()-n>500)return void setTimeout(t,25);D(o,e,a)}()}(u,function(t,e,n){var i=t[0],a=t[1],o=Math.round(i[0]),r=Math.max(Math.floor(i[1],0),0);return Math.min(Math.ceil(a[0],e),e-1),{x:o,y:r,xMax:e,yMax:Math.min(Math.ceil(a[1],n),n-1),width:e,height:n}}(n,r,s),0,function(n,i,r){console.timeEnd("[gradient]interpolateField"),console.time("[gradient]draw"),S.field=i,function(n,i,r){for(var s,h,l,c=n.width,u=n.height,d=t.canvas.getContext("2d"),p=d.getImageData(0,0,c,u),_=p.data,m=[0,0,0,0],y=0;y<c;y++)for(var f=r[y],v=0;v<u;v++){var g=4*(v*c+y);s=f[v],h=m,l=Math.max(0,Math.min(1020,4*Math.round((s-a)/(o-a)*255))),h[0]=e[l+0],h[1]=e[l+1],h[2]=e[l+2],h[3]=e[l+3],_[g+0]=m[0],_[g+1]=m[1],_[g+2]=m[2],_[g+3]=m[3]}d.putImageData(p,0,0)}(n,0,r),console.timeEnd("[gradient]draw"),c&&"function"==typeof c&&c()})};i?d():(console.time("[gradient]buildGrid"),w(v,function(t){console.timeEnd("[gradient]buildGrid"),i=t,d()}))},stop:T,createField:D,interpolatePoint:u,setData:function(t){i=null,w(v=t,function(t){i=t})},setOptions:function(n){n.hasOwnProperty("minIntensity")&&(a=n.minIntensity),n.hasOwnProperty("maxIntensity")&&(o=n.maxIntensity),n.hasOwnProperty("opacity")&&+n.opacity,n.hasOwnProperty("dpx")&&(h=+n.dpx),n.hasOwnProperty("colorScale")&&(c=t.colorScale||l,e=O(c))}};return S};L.DomUtil.setTransform||(L.DomUtil.setTransform=function(t,e,n){var i=e||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}),L.CanvasLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t){this._map=null,this._canvas=null,this._frame=null,this._delegate=null,L.setOptions(this,t)},delegate:function(t){return this._delegate=t,this},needRedraw:function(){return this._frame||(this._frame=L.Util.requestAnimFrame(this.drawLayer,this)),this},_onLayerDidResize:function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},_setCanvasPos:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t)},_onLayerDidMove:function(){var t=this;t.drawLayer(function(){t._setCanvasPos(),t._frame=null})},getEvents:function(){var t={resize:this._onLayerDidResize,moveend:this._onLayerDidMove};return this._map.options.zoomAnimation&&L.Browser.any3d&&(t.zoomanim=this._animateZoom),t},onAdd:function(t){console.log("canvas onAdd",this),this._map=t,this._canvas=L.DomUtil.create("canvas","leaflet-layer"),this._canvas.style.pointerEvents="none",this.tiles={};var e=this._map.getSize();this._canvas.width=e.x,this._canvas.height=e.y;var n=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(n?"animated":"hide")),this.options.pane.appendChild(this._canvas),t.on(this.getEvents(),this),this._setCanvasPos();var i=this._delegate||this;if(i.onLayerDidMount&&i.onLayerDidMount(),!this._frame){var a=this;a._frame=setTimeout(function(){a._onLayerDidMove()},0)}},onRemove:function(t){var e=this._delegate||this;e.onLayerWillUnmount&&e.onLayerWillUnmount(),this.options.pane.removeChild(this._canvas),t.off(this.getEvents(),this),this._canvas=null},addTo:function(t){return t.addLayer(this),this},drawLayer:function(t){var e=this._map.getSize(),n=this._map.getBounds(),i=this._map.getZoom(),a=this._map.options.crs.project(this._map.getCenter()),o=this._map.options.crs.project(this._map.containerPointToLatLng(this._map.getSize())),r=this._delegate||this;r.onDrawLayer&&r.onDrawLayer({layer:this,canvas:this._canvas,bounds:n,size:e,zoom:i,center:a,corner:o},null,t),r.onDrawLayer},_setTransform:function(t,e,n){var i=e||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=L.Layer?this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),t.zoom,t.center):this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform(this._canvas,n,e)}}),L.canvasLayer=function(t){return new L.CanvasLayer(t)},L.Control.Velocity=L.Control.extend({options:{position:"bottomleft",emptyString:"Unavailable",angleConvention:"bearingCCW",speedUnit:"m/s",onAdd:null,onRemove:null},onAdd:function(t){return this._container=L.DomUtil.create("div","leaflet-control-velocity"),L.DomEvent.disableClickPropagation(this._container),t.on("mousemove",this._onMouseMove,this),this._container.innerHTML=this.options.emptyString,this.options.leafletVelocity.options.onAdd&&this.options.leafletVelocity.options.onAdd(),this._container},onRemove:function(t){t.off("mousemove",this._onMouseMove,this),this.options.leafletVelocity.options.onRemove&&this.options.leafletVelocity.options.onRemove()},vectorToSpeed:function(t,e,n){var i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));switch(n){case"k/h":case"km/h":return this.meterSec2kilometerHour(i);case"kt":case"kn":return this.meterSec2Knots(i);case"mph":return this.meterSec2milesPerHour(i)}return i},vectorToDegrees:function(t,e,n){n.endsWith("CCW")&&(e=e>0?e=-e:Math.abs(e));var i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),a=180*Math.atan2(t/i,e/i)/Math.PI+180;return"bearingCW"!==n&&"meteoCCW"!==n||(a+=180)>=360&&(a-=360),a},meterSec2Knots:function(t){return t/.514},meterSec2kilometerHour:function(t){return 3.6*t},meterSec2milesPerHour:function(t){return 2.236936*t},_onMouseMove:function(t){var e=this.options.leafletVelocity._map.containerPointToLatLng(L.point(t.containerPoint.x,t.containerPoint.y)),n=this.options.leafletVelocity._windy.interpolatePoint(e.lng,e.lat),i="";i=n&&!isNaN(n[0])&&!isNaN(n[1])&&n[2]?"<strong>"+this.options.velocityType+" Direction: </strong>"+this.vectorToDegrees(n[0],n[1],this.options.angleConvention).toFixed(2)+"Â°, <strong>"+this.options.velocityType+" Speed: </strong>"+this.vectorToSpeed(n[0],n[1],this.options.speedUnit).toFixed(2)+this.options.speedUnit:this.options.emptyString,this._container.innerHTML=i}}),L.Map.mergeOptions({positionControl:!1}),L.Map.addInitHook(function(){this.options.positionControl&&(this.positionControl=new L.Control.MousePosition,this.addControl(this.positionControl))}),L.control.velocity=function(t){return new L.Control.Velocity(t)},L.GradientLayer=(L.Layer?L.Layer:L.Class).extend({options:{colorScale:null,data:null,reverseX:!1,reverseY:!1,dpx:2,getValue:null},_map:null,_canvasLayer:null,_context:null,_mouseControl:null,_init:null,_timer:0,_width:0,_height:0,initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._paneName=this.options.paneName||"overlayPane";let e=t._panes.overlayPane;t.getPane&&((e=t.getPane(this._paneName))||(e=t.createPane(this._paneName))),this._canvasLayer=L.canvasLayer({pane:e}).delegate(this),this._canvasLayer.addTo(t),this._map=t},onRemove:function(t){this._destroy()},setData:function(t){this.options.data=t,this._init&&(this._init.setData(t),this._clearAndRestart()),this.fire("load")},setOpacity:function(t){console.log("this._canvasLayer",this._canvasLayer),this._canvasLayer.setOpacity(t)},setOptions:function(t){this.options=Object.assign(this.options,t),t.hasOwnProperty("data")&&(this.options.data=t.data),this._init&&(this._init.setOptions(t),t.hasOwnProperty("data")&&this._init.setData(t.data),this._clearAndRestart()),this.fire("load")},onDrawLayer:function(t,e,n){var i=this;this._init?this.options.data&&(this._timer&&clearTimeout(i._timer),this._timer=setTimeout(function(){i._draw(n)},250)):this._initLayer(this)},_initLayer:function(t){t._resize();const e=Object.assign({canvas:t._canvasLayer._canvas,map:this._map},t.options);this._init=new GradientCanvas(e),this._context=this._canvasLayer._canvas.getContext("2d"),this._canvasLayer._canvas.classList.add("gradient-overlay"),this.onDrawLayer(),this._map.on("dragstart",t._init.stop),this._map.on("dragend",t._clearAndRestart),this._map.on("zoomstart",t._init.stop),this._map.on("zoomend",t._clearAndRestart),this._map.on("resize",t._resize)},_initMouseHandler:function(t){if(t&&(this._map.removeControl(this._mouseControl),this._mouseControl=!1),!this._mouseControl&&this.options.displayValues){var e=this.options.displayOptions||{};e.leafletGradient=this,this._mouseControl=L.control.velocity(e).addTo(this._map)}},_clearAndRestart:function(){this._context&&this._context.clearRect(0,0,this._width,this._height),this._init&&this._draw()},_draw:function(t){var e=this._map.getBounds(),n=this._map.getSize();this._init.start([[0,0],[n.x,n.y]],n.x,n.y,[[e._southWest.lng,e._southWest.lat],[e._northEast.lng,e._northEast.lat]],t)},_resize:function(t){var e=t?t.newSize:this._map.getSize();this._width=e.x,this._height=e.y,this._init&&this._init.stop(),this._context&&this._context.clearRect(0,0,this._width,this._height)},_destroy:function(){this._timer&&clearTimeout(this._timer),this._init&&this._init.stop(),this._context&&this._context.clearRect(0,0,this._width,this._height),this._mouseControl&&this._map.removeControl(this._mouseControl),this._mouseControl=null,this._init=null,this._map.removeLayer(this._canvasLayer)}}),L.gradientLayer=function(t){return new L.GradientLayer(t)},L.VelocityLayer=(L.Layer?L.Layer:L.Class).extend({options:{displayValues:!0,displayOptions:{velocityType:"Velocity",position:"bottomleft",emptyString:"No velocity data"},maxVelocity:10,colorScale:null,data:null,reverseX:!1,reverseY:!1,waveStyle:!1},_map:null,_canvasLayer:null,_windy:null,_context:null,_timer:0,_mouseControl:null,initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._paneName=this.options.paneName||"overlayPane";let e=t._panes.overlayPane;t.getPane&&((e=t.getPane(this._paneName))||(e=t.createPane(this._paneName))),this._canvasLayer=L.canvasLayer({pane:e}).delegate(this),this._canvasLayer.addTo(t),this._map=t},onRemove:function(t){this._destroyWind()},setData:function(t){this.options.data=t,this._windy&&(this._windy.setData(t),this._clearAndRestart()),this.fire("load")},setOpacity:function(t){console.log("this._canvasLayer",this._canvasLayer),this._canvasLayer.setOpacity(t)},setOptions:function(t){this.options=Object.assign(this.options,t),t.hasOwnProperty("displayOptions")&&(this.options.displayOptions=Object.assign(this.options.displayOptions,t.displayOptions),this._initMouseHandler(!0)),t.hasOwnProperty("data")&&(this.options.data=t.data),this._windy&&(this._windy.setOptions(t),t.hasOwnProperty("data")&&this._windy.setData(t.data),this._clearAndRestart()),this.fire("load")},onDrawLayer:function(t,e,n){var i=this;this._windy?this.options.data&&(this._timer&&clearTimeout(i._timer),this._timer=setTimeout(function(){i._context&&i._context.clearRect(0,0,3e3,3e3),i._startWindy(),n&&"function"==typeof n&&n()},750)):this._initWindy(this)},_startWindy:function(){var t=this._map.getBounds(),e=this._map.getSize();this._windy.start([[0,0],[e.x,e.y]],e.x,e.y,[[t._southWest.lng,t._southWest.lat],[t._northEast.lng,t._northEast.lat]])},_initWindy:function(t){const e=Object.assign({canvas:t._canvasLayer._canvas,map:this._map},t.options);this._windy=new Windy(e),this._context=this._canvasLayer._canvas.getContext("2d"),this._canvasLayer._canvas.classList.add("velocity-overlay"),this.onDrawLayer(),this._map.on("dragstart",t._windy.stop),this._map.on("dragend",t._clearAndRestart),this._map.on("zoomstart",t._windy.stop),this._map.on("zoomend",t._clearAndRestart),this._map.on("resize",t._clearWind),this._initMouseHandler(!1)},_initMouseHandler:function(t){if(t&&(this._map.removeControl(this._mouseControl),this._mouseControl=!1),!this._mouseControl&&this.options.displayValues){var e=this.options.displayOptions||{};e.leafletVelocity=this,this._mouseControl=L.control.velocity(e).addTo(this._map)}},_clearAndRestart:function(){this._context&&this._context.clearRect(0,0,3e3,3e3),this._windy&&this._startWindy()},_clearWind:function(){this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3)},_destroyWind:function(){this._timer&&clearTimeout(this._timer),this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3),this._mouseControl&&this._map.removeControl(this._mouseControl),this._mouseControl=null,this._windy=null,this._map.removeLayer(this._canvasLayer)}}),L.velocityLayer=function(t){return new L.VelocityLayer(t)};var Windy=function(t){var e=t.minVelocity||0,n=t.maxVelocity||10,i=(t.velocityScale||.005)*(Math.pow(window.devicePixelRatio,1/3)||1),a=t.particleAge||90,o=t.particleMinAge||10,r=t.lineWidth||1,s=t.particleMultiplier||1/300,h=Math.pow(window.devicePixelRatio,1/3)||1.6,l=t.frameRate||15,c=1e3/l,u=t.opacity||.97,d=t.reverseX||!1,p=t.reverseY||!1,_=t.waveStyle||!1;const m=t.colorScale||["rgb( 36,104,180)","rgb( 60,157,194)","rgb(128,205,193)","rgb(151,218,168)","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150, 75)","rgb(250,112, 52)","rgb(245, 64, 32)","rgb(237, 45, 28)","rgb(220, 24, 32)","rgb(180,  0, 35)"];var y,f,v,g,w,x,M,C,P,b,O=[NaN,NaN,null],D=t.data,T=function(t,e,n,i,a,o){var r=1-t,s=1-e,h=r*s,l=t*s,c=r*e,u=t*e,d=n[0]*h+i[0]*l+a[0]*c+o[0]*u,p=n[1]*h+i[1]*l+a[1]*c+o[1]*u;return[d,p,Math.sqrt(d*d+p*p)]},S=function(t){var e=null,n=null;return t.forEach(function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"1,2":case"2,2":e=t;break;case"1,3":case"2,3":n=t;break;default:t}}),function(t,e){var n=t.data,i=e.data;return{header:t.header,data:function(t){return[n[t],i[t]]},interpolate:T}}(e,n)},R=function(t,e){if(!f)return null;var n,i=z(t-g,360)/x,a=(w-e)/M,o=Math.floor(i),r=o+1,s=Math.floor(a),h=s+1;if(n=f[s]){var l=n[o],c=n[r];if(A(l)&&A(c)&&(n=f[h])){var u=n[o],d=n[r];if(A(u)&&A(d))return y.interpolate(i-o,a-s,l,c,u,d)}}return null},A=function(t){return null!=t},z=function(t,e){return t-e*Math.floor(t/e)},W=function(t,e,n,i,a,o,r){var s=r[0]*o,h=r[1]*o,l=N(t,e,n,i,a);return r[0]=l[0]*s+l[2]*h,r[1]=l[1]*s+l[3]*h,r},N=function(t,e,n,i,a){var o=2*Math.PI,r=e<0?5:-5,s=n<0?5:-5,h=U(n,e+r),l=U(n+s,e),c=Math.cos(n/360*o);return[(h[0]-i)/r/c,(h[1]-a)/r/c,(l[0]-i)/s,(l[1]-a)/s]},V=function(t,e,n){function i(e,n){var i=t[Math.round(e)];return i&&i[Math.round(n)]||O}i.release=function(){t=[]},i.randomize=function(t){var n,a,o=0;do{n=Math.round(Math.floor(Math.random()*e.width)+e.x),a=Math.round(Math.floor(Math.random()*e.height)+e.y)}while(null===i(n,a)[2]&&o++<30);return t.x=n,t.y=a,t},n(e,i)},E=function(t){return t/180*Math.PI},F=function(e,n,i){var a=t.map.containerPointToLatLng(L.point(e,n));return[a.lng,a.lat]},U=function(e,n,i){var a=t.map.latLngToContainerPoint(L.latLng(e,n));return[a.x,a.y]},I=function(i,l){function d(t,e){return m.indexFor=function(n){return Math.max(0,Math.min(m.length-1,Math.round((n-t)/(e-t)*(m.length-1))))},m}var p=d(e,n);_&&(p=d(o,a));var y=p.map(function(){return[]}),f=Math.round(i.width*i.height*s);/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)&&(f*=h);for(var v=`rgba(0, 0, 0, ${u})`,g=[],L=0;L<f;L++)g.push(l.randomize({age:Math.floor(Math.random()*(a-o)+o)+0}));var w=t.canvas.getContext("2d");w.lineWidth=r,w.fillStyle=v,w.globalAlpha=.6;var x=Date.now();!function t(){b=requestAnimationFrame(t);var e=Date.now(),n=e-x;n>c&&(x=e-n%c,y.forEach(function(t){t.length=0}),g.forEach(function(t){t.age>a&&(l.randomize(t).age=0);var e=t.x,n=t.y,i=l(e,n),o=i[2];if(null===o)t.age=a;else{var r=e+i[0],s=n+i[1];null!==l(r,s)[2]?(t.xt=r,t.yt=s,_&&(o=t.age),y[p.indexFor(o)].push(t)):(t.x=r,t.y=s)}t.age+=1}),w.globalCompositeOperation="destination-in",w.fillRect(i.x,i.y,i.width,i.height),w.globalCompositeOperation="lighter",w.globalAlpha=0===u?0:.9*u,y.forEach(function(t,e){t.length>0&&(w.beginPath(),w.strokeStyle=p[e],t.forEach(function(t){w.moveTo(t.x,t.y),w.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt}),w.stroke())}))}()},k=function(){H.field&&H.field.release(),b&&cancelAnimationFrame(b)},H={params:t,start:function(t,e,n,a){var o={south:E(a[0][1]),north:E(a[1][1]),east:E(a[1][0]),west:E(a[0][0]),width:e,height:n};k(),function(t,e){var n=!0;t.length<2&&(n=!1),n||console.log("Windy Error: data must have at least two components (u,v)");var i=(y=S(t)).header;if(i.hasOwnProperty("gridDefinitionTemplate")&&0!=i.gridDefinitionTemplate&&(n=!1),n||console.log("Windy Error: Only data with Latitude_Longitude coordinates is supported"),n=!0,g=i.lo1,w=i.la1,x=i.dx,M=i.dy,C=i.nx,P=i.ny,i.hasOwnProperty("scanMode")){var a=i.scanMode.toString(2),o=(a=("0"+a).slice(-8)).split("").map(Number).map(Boolean);o[0]&&(x=-x),o[1]&&(M=-M),o[2]&&(n=!1),o[3]&&(n=!1),o[4]&&(n=!1),o[5]&&(n=!1),o[6]&&(n=!1),o[7]&&(n=!1),n||console.log("Windy Error: Data with scanMode: "+i.scanMode+" is not supported.")}(v=new Date(i.refTime)).setHours(v.getHours()+i.forecastTime),f=[];for(var r=0,s=Math.floor(C*x)>=360,h=0;h<P;h++){for(var l=[],c=0;c<C;c++,r++)d?l.unshift(y.data(r)):l.push(y.data(r));s&&(d?l.unshift(l[l.length-1]):l.push(l[0])),p?f.unshift(l):f.push(l)}e({date:v,interpolate:R})}(D,function(a){!function(t,e,n,a){var o={},r=(n.south-n.north)*(n.west-n.east),s=i*Math.pow(r,.4),h=[],l=e.x;function c(n){for(var i=[],a=e.y;a<=e.yMax;a+=2){var r=F(n,a);if(r){var l=r[0],c=r[1];if(isFinite(l)){var u=t.interpolate(l,c);u&&(u=W(o,l,c,n,a,s,u),i[a+1]=i[a]=u)}}}h[n+1]=h[n]=i}!function t(){for(var n=Date.now();l<e.width;)if(c(l),l+=2,Date.now()-n>1e3)return void setTimeout(t,25);V(h,e,a)}()}(a,function(t,e,n){var i=t[0],a=t[1],o=Math.round(i[0]),r=Math.max(Math.floor(i[1],0),0);return Math.min(Math.ceil(a[0],e),e-1),{x:o,y:r,xMax:e,yMax:Math.min(Math.ceil(a[1],n),n-1),width:e,height:n}}(t,e,n),o,function(t,e){H.field=e,I(t,e)})})},stop:k,createField:V,interpolatePoint:R,setData:function(t){D=t},setOptions:function(t){t.hasOwnProperty("minVelocity")&&(e=t.minVelocity),t.hasOwnProperty("maxVelocity")&&(n=t.maxVelocity),t.hasOwnProperty("velocityScale")&&(i=(t.velocityScale||.005)*(Math.pow(window.devicePixelRatio,1/3)||1)),t.hasOwnProperty("particleAge")&&(a=t.particleAge),t.hasOwnProperty("particleMinAge")&&(o=t.particleMinAge),t.hasOwnProperty("lineWidth")&&(r=t.lineWidth),t.hasOwnProperty("particleMultiplier")&&(s=t.particleMultiplier),t.hasOwnProperty("opacity")&&(u=+t.opacity),t.hasOwnProperty("frameRate")&&(l=t.frameRate),c=1e3/l,t.hasOwnProperty("waveStyle")&&(_=t.waveStyle)}};return H};window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)});